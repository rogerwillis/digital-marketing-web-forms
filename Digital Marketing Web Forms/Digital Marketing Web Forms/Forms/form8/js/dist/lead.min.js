$.extend($.Ahead.prototype,{setup:function(){var e=this;this.ahead().typeahead({source:function(t,n){n(e.getResults(t))},updater:function(t){var n=[];return n.item=e.map[t],e.onSelect(n),n.item.label},minLength:e.options.minLength})}}),$.extend($.Ahead.prototype,{setup:function(){var e=this;this.ahead().autocomplete({source:$.proxy(e.getResults,e),select:function(t,n){n.item=e.map[n.item.label];var i=$.proxy(e.onSelect,e,t,n);return i(),!1},minLength:e.options.minLength})},getResults:function(e,t){if(!e)return!1;var n=this;url=this.options.source,getData={startofname:e.term},n.options.data===!1&&(url=url+"/"+e.term,getData=!1),$.ajax({url:url,type:"get",data:getData,dateType:"json",success:function(e){t(n.formatData(e))}})}}),function(e,t){e.ahead=function(t,n,i){var o,a=t.split(".")[0];t=t.split(".")[1],o=a+"-"+t,i||(i=n,n=e.Ahead),e.expr[":"][o]=function(n){return!!e.data(n,t)},e[a]=e[a]||{},e[a][t]=function(e,t){arguments.length&&this._create(e,t)};var s=new n;s.options=e.extend(!0,{},s.options),e[a][t].prototype=e.extend(!0,s,{namespace:a,name:t,baseClass:o},i),e.ahead.bridge(t,e[a][t])},e.ahead.bridge=function(n,i){e.fn[n]=function(o){var a="string"==typeof o,s=Array.prototype.slice.call(arguments,1),l=this;return o=!a&&s.length?e.extend.apply(null,[!0,o].concat(s)):o,a&&"_"===o.charAt(0)?l:(this.each(a?function(){var i=e.data(this,n),a=i&&e.isFunction(i[o])?i[o].apply(i,s):i;return a!==i&&a!==t?!1:a}:function(){var t=e.data(this,n);t?t.option(o||{})._init():e.data(this,n,new i(o,this))}),l)}},e.Ahead=function(e,t){arguments.length&&this._create(e,t)},e.Ahead.prototype={name:"typeahead",eventPrevix:"",options:{sourceType:"js",source:"",indentifier:"name",state:"",city:"",minLength:3,valueField:"id",fakeElement:!0,data:!0},_create:function(t,n){e.data(n,this.name,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.name,function(){i.destroy()}),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.name]},_init:function(){this.options.fakeElement&&(this.element.attr("data-real")&&e(this.element.attr("data-real")).length>0?this.realElement=e(this.element.attr("data-real")):(this.realElement=e("<input />",{type:"hidden",name:"real_"+this.element.attr("name")}),this.element.after(this.realElement))),this.results=this.getResults(),this.setup()},destroy:function(){this.element.unbind("."+this.name).removeData(this.name),this.ahead().unbind("."+this.name).removeAttr("aria-disabled").removeClass(this.baseClass+"-disabled ui-state-disabled")},ahead:function(){return this.element},option:function(n,i){var o=n;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof n){if(i===t)return this.options[n];o={},o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.ahead()[t?"addClass":"removeClass"](this.baseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},setup:function(){},getResults:function(t){var n=this;switch(this.options.sourceType){case"js":return this.formatData(this.options.source);case"ajax":break;default:url=this.options.source;var i={startofname:t};return n.options.data===!1&&(url=url+"/"+t,i=!1),e.ajax({url:url,type:"get",data:i,dateType:"json",success:function(e){n.results=n.formatData(e)}}),n.results}return this.formatData(this.options.source)},formatData:function(n){var i=this,o=[];if(i.map=[],n.length===t){var a=i.extractFields(n);o.push(a)}else e.each(n,function(e,t){var n=i.extractFields(t);o.push(n)});return o},extractFields:function(t){var n=this,i={};return e.each(t,function(e,t){var o=new RegExp(n.options.valueField,"gi");e.search(o)>-1&&(i.value=t);var a=new RegExp(n.options.indentifier,"gi");e.search(a)>-1&&(i.label=t),e.search(/city/gi)>-1&&(i.city=t),e.search(/state/gi)>-1&&(i.state=t)}),i.label=i.label+", "+i.city+", "+i.state,n.map[i.label]=i,i.label},onSelect:function(e,t){return t=t?t:e,this.options.fakeElement?(this.realElement.val(t.item.value),this.element.val(t.item.label)):this.element.val(t.item.value),!1}}}(jQuery),function(e,t){e.widget("uti.legal",{options:{defaultText:"",source:activeEnvironment.active+"/api/ewc?ewcType=Form",workingIndicator:"#workingIndicator"},_create:function(){e(".legalBox")},_init:function(){var t=this;e.ajax({url:this.options.source,type:"get",dateType:"json",beforeSend:function(){e(t.options.workingIndicator).length>0&&e(t.options.workingIndicator).show()},error:function(){e(t.options.workingIndicator).length>0&&e(t.options.workingIndicator).hide()},success:function(n){e(t.options.workingIndicator).length>0&&e(t.options.workingIndicator).hide();var i=n;t.element.text(i.Detail)}})}})}(jQuery),function(e,t){new Date;e.widget("uti.countries",{options:{source:activeEnvironment.active+"/api/countries/",nonSelectionOption:!1,nonSelectionText:"Select a country",elmSelector:"countries",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;t.element.append(function(){return t.nonSelectionOption?e("<option>").text(t.options.nonSelectionText):void 0})},_init:function(){var t=this;e.getJSON(t.options.source).done(function(n){e(t.element).empty(),e.each(n,function(n,i){e("<option>").val(i.Code).text(i.CountryName).appendTo(t.element)}),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")}).fail(function(){e("<option>").val("-1").text(t.options.fetchErrorText).appendTo(t.element),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")})}})}(jQuery),function(e,t){e.widget("uti.highschoolstates",{options:{source:activeEnvironment.active+"/api/highschoolstate",nonSelectionOption:!0,nonSelectionText:"Select a State",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;t.element.append(function(){return t.options.nonSelectionOption?e("<option>").text(t.options.nonSelectionText)[0]:void 0})},clearlist:function(){var t=this;t.element.children("option").length>1&&(e(t.element).empty(),t.options.nonSelectionOption&&e(t.element).append('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"))},_init:function(){var t=this;e.ajax({type:"GET",url:t.options.source,dataType:"json",success:function(n){e(t.element).empty(),t.options.nonSelectionOption&&e("<option>").val("").text(t.options.nonSelectionText).appendTo(t.element),e.each(n,function(n,i){e("<option>").val(i.Code).text(i.State).appendTo(t.element)}),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")},error:function(){e("<option>").val("-1").text(t.options.fetchErrorText).appendTo(t.element),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")}})}})}(jQuery),function(e,t){e.widget("uti.highschoolcity",{options:{source:activeEnvironment.active+"/api/highschoolcity?state=",nonSelectionOption:!0,nonSelectionText:"Select a City",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;e(t.element).append(function(){return t.options.nonSelectionOption?e('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"):void 0})},_init:function(){},clearlist:function(){var t=this;t.element.children("option").length>1&&(e(t.element).empty(),t.options.nonSelectionOption&&e(t.element).append('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"))},lookup:function(t){var n=this,i=n.options.source+t;e.getJSON(i).done(function(t){e(n.element).empty(),n.options.nonSelectionOption&&e("<option>").val("").text(n.options.nonSelectionText).appendTo(n.element),e.each(t,function(t,i){e("<option>").val(i).text(i).appendTo(n.element)}),n.element.is(":data('mobile-selectmenu')")&&e(n.element).selectmenu("refresh")}).fail(function(){e("<option>").val("").text(n.options.fetchErrorText).appendTo(n.element),n.element.is(":data('mobile-selectmenu')")&&e(n.element).selectmenu("refresh")})}})}(jQuery),function(e,t){e.widget("uti.highschoolnames",{options:{source:activeEnvironment.active+"/api/highschools?state=",nonSelectionOption:!0,nonSelectionText:"Select Your High School",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;e(t.element).append(function(){return t.options.nonSelectionOption?e('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"):void 0})},_init:function(){},clearlist:function(){var t=this;t.element.children("option").length>1&&(e(t.element).empty(),t.options.nonSelectionOption&&e(t.element).append('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"))},lookup:function(t,n){var i=this,o=i.options.source+t+"&city="+n;e.getJSON(o).done(function(t){e(i.element).empty(),i.options.nonSelectionOption&&e("<option>").val("").text(i.options.nonSelectionText).appendTo(i.element),e("#txtHighSchool,#high-school-name").append('<option value="0" >- HIGH SCHOOL NOT LISTED -</option>'),e.each(t,function(t,n){e("<option>").val(n.HighSchoolId).text(n.Name).appendTo(i.element)}),i.element.is(":data('mobile-selectmenu')")&&e(i.element).selectmenu("refresh")}).fail(function(){e("<option>").val("").text(i.options.fetchErrorText).appendTo(i.element),i.element.is(":data('mobile-selectmenu')")&&e(i.element).selectmenu("refresh")})}})}(jQuery),function(e,t){e.widget("uti.militarybases",{options:{source:activeEnvironment.active+"/api/militarybases?state=",nonSelectionOption:!0,nonSelectionText:"Select Your Base",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;e(t.element).append(function(){return t.options.nonSelectionOption?e('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"):void 0})},_init:function(){},clearlist:function(){var t=this;t.element.children("option").length>1&&(e(t.element).empty(),t.options.nonSelectionOption&&e(t.element).append('<option selected="selected" value="">'+t.options.nonSelectionText+"</option>"))},lookup:function(t,n){var i=this,o=i.options.source+t+"&city="+n;e.getJSON(o).done(function(t){e(i.element).empty(),i.options.nonSelectionOption&&e("<option>").val("").text(i.options.nonSelectionText).appendTo(i.element),e("#txtMilitaryBase,#military-installation").append('<option value="0" >-BASE NOT LISTED -</option>'),e.each(t,function(t,n){e("<option>").val(n.MilitaryBaseId).text(n.Name).appendTo(i.element)}),i.element.is(":data('mobile-selectmenu')")&&e(i.element).selectmenu("refresh")}).fail(function(){e("<option>").val("").text(i.options.fetchErrorText).appendTo(i.element),i.element.is(":data('mobile-selectmenu')")&&e(i.element).selectmenu("refresh")})},lookupByState:function(t){var n=this,i=n.options.source+t;e.getJSON(i).done(function(t){e(n.element).empty(),n.options.nonSelectionOption&&e("<option>").val("").text(n.options.nonSelectionText).appendTo(n.element),e("#txtMilitaryBase,#military-installation").append('<option value="0" >-BASE NOT LISTED -</option>'),e.each(t,function(t,i){e("<option>").val(i.MilitaryBaseId).text(i.Name).appendTo(n.element)}),n.element.is(":data('mobile-selectmenu')")&&e(n.element).selectmenu("refresh")}).fail(function(){e("<option>").val("").text(n.options.fetchErrorText).appendTo(n.element),n.element.is(":data('mobile-selectmenu')")&&e(n.element).selectmenu("refresh")})}})}(jQuery),function(e,t){e.widget("uti.militarystates",{options:{source:activeEnvironment.active+"/api/militarybases",nonSelectionOption:!0,nonSelectionText:"Select a State",fetchErrorText:"Failed to get the list"},_create:function(){var t=this;t.element.append(function(){return t.options.nonSelectionOption?e("<option>").text(t.options.nonSelectionText)[0]:void 0})},_init:function(){var t=this;e.getJSON(t.options.source).done(function(n){e(t.element).empty(),t.options.nonSelectionOption&&e("<option>").val("").text(t.options.nonSelectionText).appendTo(t.element),e.each(n,function(n,i){e("<option>").val(i.City).text(i.State).appendTo(t.element)}),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")}).fail(function(){e("<option>").val("-1").text(t.options.fetchErrorText).appendTo(t.element),t.element.is(":data('mobile-selectmenu')")&&e(t.element).selectmenu("refresh")})}})}(jQuery),function(e){e.zipCompleter=function(t,n){var i={source:activeEnvironment.active+"/api/zipcodes",workingIndicator:".workingIndicator",fields:{Zip:"zip",State:"state",City:"city"},afterUpdate:function(){}},o=this,a=e(t),s=e(t).parents("form");o.ajax=e.ajax(),this.init=function(){this.settings=e.extend(i,n),this.settings.workingIndicator+=":not(disabled)",a.change(function(){5===e(this).val().length&&o.getResults(e(this).val())})},this.getResults=function(t){e.ajax({url:o.settings.source+"/"+t,type:"get",dateType:"json",beforeSend:function(){e(i.workingIndicator).length>0&&e(i.workingIndicator).show()},error:function(){e(i.workingIndicator).length>0&&e(i.workingIndicator).hide()},success:function(t){e(i.workingIndicator).length>0&&e(i.workingIndicator).hide(),o.updateFields({Zip:t[0].Zip,City:t[0].City,State:t[0].State})}})},this.updateFields=function(t){e.each(o.settings.fields,function(e,n){s.find('input[name="'+n+'"],select[name="'+n+'"]').val(t[e])}),this.settings.afterUpdate()},this.init()},e.fn.zipCompleter=function(t){return this.each(function(){if(void 0==e(this).data("zipCompleter")){var n=new e.zipCompleter(this,t);e(this).data("zipCompleter",n)}else e(this).data("zipCompleter",e(this).data("zipCompleter"))})}}(jQuery);